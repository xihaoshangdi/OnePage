{"version":3,"sources":["main.js"],"names":["siteData","JSON","parse","localStorage","getItem","href","logo","text","init","render","$","bind","addCard","focus","document","off","console","log","blur","keydown","keyOpen","remove","each","index","node","$li","favicon","parent","before","contextmenu","e","stopPropagation","preventDefault","splice","$sitebox","children","$image","get","$text","one","$logo","url","prompt","pattern","realUrl","match","replace","card","unshift","key","toLowerCase","window","open","onbeforeunload","data","stringify","setItem"],"mappings":"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","file":"main.e8d3ba36.js","sourceRoot":"..\\src","sourcesContent":["//获取站点数据对象\r\nconst siteData = JSON.parse(localStorage.getItem('siteData')) || [\r\n  { href: 'https://bilibili.com', logo: 'B', text: 'Bilibili' }\r\n];\r\n\r\nconst init = () => {\r\n  //渲染初始列表\r\n  render(siteData);\r\n  //设置监听\r\n  $('.siteLast').bind('click', addCard);\r\n  //\r\n  $('#search').focus(function() {\r\n    $(document).off();\r\n    console.log('qqq');\r\n  });\r\n  $('#search').blur(function() {\r\n    $(document).keydown(keyOpen);\r\n  });\r\n};\r\n\r\nconst render = () => {\r\n  //清空\r\n  $('.siteMain li[name!=\"addCard\"]').remove();\r\n  //重新渲染\r\n  $.each(siteData, (index, node) => {\r\n    const $li = $(`\r\n    <li>\r\n      <a href=${node.href} >\r\n        <div class=\"siteContainer\" >\r\n          <img class=\"logo\" src=${node.favicon}></img>\r\n          <div class=\"text\">${node.text}</div>\r\n        </div>\r\n      </a>\r\n    </li>\r\n    `);\r\n    //渲染到新增Card前面\r\n    $('.siteLast')\r\n      .parent()\r\n      .before($li);\r\n\r\n    //绑定删除事件\r\n    $li.contextmenu(e => {\r\n      e.stopPropagation(); // 阻止冒泡\r\n      e.preventDefault(); //阻止默认\r\n      siteData.splice(index, 1);\r\n      render();\r\n    });\r\n    //设置图片加载事件\r\n    const $sitebox = $li.children().children();\r\n    const $image = $($sitebox.children().get(0));\r\n    const $text = $($sitebox.children().get(1));\r\n    $image.one('error', () => {\r\n      const $logo = $(`<div class=\"logo\">${node.logo}</div>`);\r\n      $text.before($logo);\r\n      $image.remove();\r\n    });\r\n  });\r\n};\r\n\r\nconst addCard = () => {\r\n  const url = prompt('请输入要添加的网址', 'https://');\r\n  const pattern = /(http|https):\\/\\/(www.)?(\\w+(\\.)?)+/;\r\n  const realUrl = url.match(pattern)[0];\r\n  const text = realUrl.replace(/(http|https):\\/\\/(www.)?/, '');\r\n  const favicon = `https://api.faviconkit.com/${text}/144`;\r\n  //检测图片\r\n  let card = {\r\n    href: realUrl,\r\n    favicon: favicon,\r\n    logo: text[0],\r\n    text: text\r\n  };\r\n  siteData.unshift(card);\r\n  render();\r\n};\r\n\r\nconst keyOpen = e => {\r\n  const { key } = e;\r\n  $.each(siteData, (index, node) => {\r\n    if (node.text[0].toLowerCase() === key) {\r\n      window.open(node.href);\r\n    }\r\n  });\r\n};\r\n\r\n//离开保存;\r\nonbeforeunload = () => {\r\n  const data = JSON.stringify(siteData);\r\n  localStorage.setItem('siteData', data);\r\n};\r\n\r\n//初始化\r\ninit();\r\n"]}