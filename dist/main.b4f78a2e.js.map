{"version":3,"sources":["main.js"],"names":["siteData","JSON","parse","localStorage","getItem","href","favicon","logo","text","init","render","$","bind","addCard","focus","document","off","blur","keydown","keyOpen","remove","each","index","node","$li","parent","before","contextmenu","e","stopPropagation","preventDefault","splice","$sitebox","children","$image","get","$text","one","$logo","url","prompt","pattern","realUrl","match","replace","card","unshift","key","toLowerCase","window","open","onbeforeunload","data","stringify","setItem"],"mappings":"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","file":"main.b4f78a2e.js","sourceRoot":"..\\src","sourcesContent":["//获取站点数据对象\r\nconst siteData = JSON.parse(localStorage.getItem('siteData')) || [\r\n  {\r\n    href: 'https://github.com',\r\n    favicon: 'https://api.faviconkit.com/github.com/144',\r\n    logo: 'g',\r\n    text: 'github.com'\r\n  },\r\n  {\r\n    href: 'https://developer.mozilla.org',\r\n    favicon: 'https://api.faviconkit.com/developer.mozilla.org/144',\r\n    logo: 'd',\r\n    text: 'developer.mozilla.org'\r\n  },\r\n  {\r\n    href: 'https://store.steampowered.com',\r\n    favicon: 'https://api.faviconkit.com/store.steampowered.com/144',\r\n    logo: 's',\r\n    text: 'store.steampowered.com'\r\n  },\r\n  {\r\n    href: 'https://store.ubi.com',\r\n    favicon: 'https://api.faviconkit.com/store.ubi.com/144',\r\n    logo: 's',\r\n    text: 'store.ubi.com'\r\n  },\r\n  {\r\n    href: 'https://www.facebook.com',\r\n    favicon: 'https://api.faviconkit.com/facebook.com/144',\r\n    logo: 'f',\r\n    text: 'facebook.com'\r\n  },\r\n  {\r\n    href: 'https://twitter.com',\r\n    favicon: 'https://api.faviconkit.com/twitter.com/144',\r\n    logo: 't',\r\n    text: 'twitter.com'\r\n  },\r\n  {\r\n    href: 'https://www.iconfont.cn',\r\n    favicon: 'https://api.faviconkit.com/iconfont.cn/144',\r\n    logo: 'i',\r\n    text: 'iconfont.cn'\r\n  },\r\n  {\r\n    href: 'https://www.ele.me',\r\n    favicon: 'https://api.faviconkit.com/ele.me/144',\r\n    logo: 'e',\r\n    text: 'ele.me'\r\n  },\r\n  {\r\n    href: 'https://youtube.com',\r\n    favicon: 'https://api.faviconkit.com/youtube.com/144',\r\n    logo: 'y',\r\n    text: 'youtube.com'\r\n  }\r\n];\r\n\r\nconst init = () => {\r\n  //渲染初始列表\r\n  render(siteData);\r\n  //设置监听\r\n  $('.siteLast').bind('click', addCard);\r\n  //\r\n  $('#search').focus(function() {\r\n    $(document).off();\r\n  });\r\n  $('#search').blur(function() {\r\n    $(document).keydown(keyOpen);\r\n  });\r\n};\r\n\r\nconst render = () => {\r\n  //清空\r\n  $('.siteMain li[name!=\"addCard\"]').remove();\r\n  //重新渲染\r\n  $.each(siteData, (index, node) => {\r\n    const $li = $(`\r\n    <li>\r\n      <a href=${node.href} >\r\n        <div class=\"siteContainer\" >\r\n          <img class=\"logo\" src=${node.favicon}></img>\r\n          <div class=\"text\">${node.text}</div>\r\n        </div>\r\n      </a>\r\n    </li>\r\n    `);\r\n    //渲染到新增Card前面\r\n    $('.siteLast')\r\n      .parent()\r\n      .before($li);\r\n\r\n    //绑定删除事件\r\n    $li.contextmenu(e => {\r\n      e.stopPropagation(); // 阻止冒泡\r\n      e.preventDefault(); //阻止默认\r\n      siteData.splice(index, 1);\r\n      render();\r\n    });\r\n    //设置图片加载事件\r\n    const $sitebox = $li.children().children();\r\n    const $image = $($sitebox.children().get(0));\r\n    const $text = $($sitebox.children().get(1));\r\n    $image.one('error', () => {\r\n      const $logo = $(`<div class=\"logo\">${node.logo}</div>`);\r\n      $text.before($logo);\r\n      $image.remove();\r\n    });\r\n  });\r\n};\r\n\r\nconst addCard = () => {\r\n  const url = prompt('请输入要添加的网址', 'https://');\r\n  const pattern = /(http|https):\\/\\/(www.)?(\\w+(\\.)?)+/;\r\n  const realUrl = url.match(pattern)[0];\r\n  const text = realUrl.replace(/(http|https):\\/\\/(www.)?/, '');\r\n  const favicon = `https://api.faviconkit.com/${text}/144`;\r\n  //检测图片\r\n  let card = {\r\n    href: realUrl,\r\n    favicon: favicon,\r\n    logo: text[0],\r\n    text: text\r\n  };\r\n  siteData.unshift(card);\r\n  render();\r\n};\r\n\r\nconst keyOpen = e => {\r\n  const { key } = e;\r\n  $.each(siteData, (index, node) => {\r\n    if (node.text[0].toLowerCase() === key) {\r\n      window.open(node.href);\r\n    }\r\n  });\r\n};\r\n\r\n//离开保存;\r\nonbeforeunload = () => {\r\n  const data = JSON.stringify(siteData);\r\n  localStorage.setItem('siteData', data);\r\n};\r\n\r\n//初始化\r\ninit();\r\n"]}